<h2 mat-dialog-title>Available Slots for {{ getFormattedDate() }}</h2>

<mat-dialog-content class="mat-typography popup-content">
  <p *ngIf="displaySlots.length === 0" class="no-slots-message">No available slots for this day from your subscribed teachers.</p>

  <mat-list *ngIf="displaySlots.length > 0" class="scrollable-slot-list">
    <div *ngFor="let slot of displaySlots" class="slot-item-container">
      <mat-list-item class="slot-item">
        <mat-icon matListItemIcon class="slot-icon">event</mat-icon>
        <div matListItemTitle class="slot-time">{{ formatSlotTime(slot) }}</div>
        <div matListItemLine class="teacher-info" *ngIf="slot.teacher">
          <span>Teacher: {{ slot.teacher.fullName }}</span>
          <span *ngIf="slot.teacher.chessTitle"> ({{ slot.teacher.chessTitle }})</span>
          <span *ngIf="slot.teacher.rating"> - Rating: {{ slot.teacher.rating }}</span>
        </div>
        <div matListItemLine *ngIf="!slot.teacher">Teacher information unavailable.</div>

        <button mat-stroked-button color="primary"
                class="request-button"
                (click)="requestBooking(slot)"
                [disabled]="slot.isRequestedByCurrentUser || slot.sessionId">
          <mat-icon *ngIf="!slot.isRequestedByCurrentUser && !slot.sessionId">add_shopping_cart</mat-icon>
          <span *ngIf="!slot.isRequestedByCurrentUser && !slot.sessionId">Request Booking</span>
          <span *ngIf="slot.isRequestedByCurrentUser">Requested</span>
          <span *ngIf="slot.sessionId">Booked</span>
        </button>
      </mat-list-item>
      <mat-divider></mat-divider>
    </div>
  </mat-list>

</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Close</button>
</mat-dialog-actions>
