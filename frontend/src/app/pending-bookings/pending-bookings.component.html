<div class="pending-bookings-container">
  <mat-toolbar color="primary">
    <span>Pending Booking Requests</span>
  </mat-toolbar>

  <div *ngIf="isLoading" class="loading-indicator">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <div *ngIf="!isLoading && pendingRequests.length === 0" class="no-requests-message">
    <p>No pending booking requests at the moment.</p>
  </div>

  <div *ngIf="!isLoading && pendingRequests.length > 0" class="requests-list">
    <mat-card *ngFor="let request of pendingRequests" class="request-card">
      <mat-card-header>
        <img mat-card-avatar [src]="request.student?.profilePictureUrl" alt="Student Avatar" class="student-avatar">
        <mat-card-title>{{ request.student?.fullName || 'Unknown Student' }}</mat-card-title>
        <mat-card-subtitle>Requested: {{ formatRequestTime(request) }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p *ngIf="request.studentNotes" class="student-notes">
          <strong>Student Notes:</strong> {{ request.studentNotes }}
        </p>
        <mat-form-field appearance="outline" class="full-width-field teacher-notes-field">
          <mat-label>Notes for Student (Optional)</mat-label>
          <textarea matInput [(ngModel)]="teacherNotesMap[request.id]" rows="2"></textarea>
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-stroked-button color="warn" (click)="rejectRequest(request)">
          <mat-icon>close</mat-icon> Reject
        </button>
        <button mat-flat-button color="primary" (click)="acceptRequest(request)" class="accept-button">
          <mat-icon>check</mat-icon> Accept
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
