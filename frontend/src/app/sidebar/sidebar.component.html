<div class="sidebar-container"
     [@sidebarExpansion]="isExpanded ? 'expanded' : 'collapsed'"
     [class.expanded]="isExpanded">
  <div class="sidebar-header">
    <div class="logo-container" [class.expanded]="isExpanded">
      <mat-icon svgIcon="chess-king" class="logo-icon"></mat-icon>
      <span *ngIf="isExpanded" class="logo-text">ChessConnect</span>
    </div>
    <button mat-icon-button (click)="toggleSidebar()" class="toggle-button">
      <mat-icon>{{ isExpanded ? 'menu_open' : 'menu' }}</mat-icon>
    </button>
  </div>

  <mat-nav-list class="navigation-list">
    <ng-container *ngFor="let item of navItems">
      <a mat-list-item
         *ngIf="shouldShowItem(item)"
         [routerLink]="item.route"
         routerLinkActive="active-nav-item"
         [routerLinkActiveOptions]="{exact: true}"
         [title]="item.label">
        <mat-icon matListItemIcon>{{item.icon}}</mat-icon>
        <span *ngIf="isExpanded" matListItemTitle class="nav-item-label">{{item.label}}</span>
      </a>
    </ng-container>
  </mat-nav-list>

  <div class="sidebar-spacer"></div>

  <div *ngIf="isExpanded && currentUser" class="user-profile-section">
    <img [src]="currentUser.profilePictureUrl || defaultProfilePic" alt="Profile Picture" class="profile-picture-sidebar">
    <div class="user-info-sidebar">
      <span class="user-name-sidebar">{{ currentUser.fullName }}</span>
      <span class="user-title-sidebar" *ngIf="currentUser.chessTitle">{{ currentUser.chessTitle }}</span>
    </div>
  </div>

  <hr *ngIf="isExpanded" class="sidebar-divider">

  <mat-nav-list class="bottom-nav-list">
     <a mat-list-item routerLink="/profile" routerLinkActive="active-nav-item" [title]="'Profile'">
      <mat-icon matListItemIcon>account_circle</mat-icon>
      <span *ngIf="isExpanded" matListItemTitle class="nav-item-label">Profile</span>
    </a>
    <a mat-list-item (click)="logout()" [title]="'Logout'">
      <mat-icon matListItemIcon class="logout-icon">logout</mat-icon>
      <span *ngIf="isExpanded" matListItemTitle class="nav-item-label logout-label">Logout</span>
    </a>
  </mat-nav-list>
</div>
